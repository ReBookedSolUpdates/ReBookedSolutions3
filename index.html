<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ReBooked Solutions - Buy and Sell Textbooks Securely</title>
    <meta
      name="description"
      content="ReBooked Solutions - Your secure platform for buying and selling used textbooks"
    />
    <meta name="author" content="ReBooked Solutions" />
    <link
      rel="icon"
      href="https://cdn.builder.io/api/v1/assets/0f22b19c46fe46488c6c8c5a3c15b7b9/compressed_open_book_icon-adaa9a?format=webp&width=800"
      type="image/webp"
    />

    <meta
      property="og:title"
      content="ReBooked Solutions - Buy and Sell Textbooks Securely"
    />
    <meta
      property="og:description"
      content="ReBooked Solutions - Your secure platform for buying and selling used textbooks"
    />
    <meta property="og:type" content="website" />
    <meta
      property="og:image"
      content="https://cdn.builder.io/api/v1/assets/0f22b19c46fe46488c6c8c5a3c15b7b9/compressed_open_book_icon-adaa9a?format=webp&width=800"
    />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@rebooked_solutions" />
    <meta
      name="twitter:image"
      content="https://cdn.builder.io/api/v1/assets/0f22b19c46fe46488c6c8c5a3c15b7b9/compressed_open_book_icon-adaa9a?format=webp&width=800"
    />

    <!-- Critical Resource Preloading for Performance -->
    <link rel="dns-prefetch" href="https://images.unsplash.com" />
    <link rel="preconnect" href="https://images.unsplash.com" crossorigin />
    <link rel="dns-prefetch" href="https://js.paystack.co" />
    <link rel="preconnect" href="https://js.paystack.co" crossorigin />

    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-33V40Q5BEW"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-33V40Q5BEW");
    </script>

    <!-- Immediate error suppression for network and ResizeObserver errors -->
    <script>
      (function () {
        "use strict";

        // Store originals before any other code runs
        const origError = console.error;
        const origWarn = console.warn;

        // Error patterns to suppress
        const suppressPatterns = [
          "ResizeObserver",
          "Failed to fetch",
          "TypeError: Failed to fetch",
          "edge.fullstory.com",
          "fs.js",
          "fullstory.com",
          "@vite/client",
          "ping",
          "waitForSuccessfulPing",
          "WebSocket",
          ".fly.dev",
          "eval at messageHandler",
          "chrome-extension",
          "moz-extension",
          "safari-extension",
        ];

        // Check if message should be suppressed
        function shouldSuppress(msg) {
          return suppressPatterns.some((pattern) =>
            msg.toLowerCase().includes(pattern.toLowerCase()),
          );
        }

        // Override console methods immediately
        console.error = function () {
          const msg = Array.from(arguments).join(" ");
          if (shouldSuppress(msg)) {
            // In development, log to debug instead
            if (
              window.location.hostname === "localhost" ||
              window.location.hostname.includes("dev")
            ) {
              console.debug("[SUPPRESSED]:", msg.substring(0, 100) + "...");
            }
            return;
          }
          return origError.apply(this, arguments);
        };

        console.warn = function () {
          const msg = Array.from(arguments).join(" ");
          if (shouldSuppress(msg)) {
            if (
              window.location.hostname === "localhost" ||
              window.location.hostname.includes("dev")
            ) {
              console.debug(
                "[SUPPRESSED WARN]:",
                msg.substring(0, 100) + "...",
              );
            }
            return;
          }
          return origWarn.apply(this, arguments);
        };

        // Suppress window errors
        window.addEventListener(
          "error",
          function (e) {
            const message = e.message || e.error?.message || "";
            const filename = e.filename || "";

            if (
              shouldSuppress(message) ||
              filename.includes("fullstory.com") ||
              filename.includes("fs.js") ||
              filename.includes("@vite/client")
            ) {
              e.stopPropagation();
              e.preventDefault();
              return false;
            }
          },
          true,
        );

                // Handle unhandled promise rejections
        window.addEventListener("unhandledrejection", function (e) {
          const message = e.reason?.message || e.reason?.toString() || "";
          const stack = e.reason?.stack || "";

          // Additional checks for fetch-related rejections
          if (
            shouldSuppress(message) ||
            stack.includes("messageHandler") ||
            stack.includes("eval at") ||
            message.includes("ping") ||
            message.includes("@vite/client")
          ) {
            e.preventDefault();
            return false;
          }
        });

        // Silent ResizeObserver
        if (window.ResizeObserver) {
          const Original = window.ResizeObserver;
          window.ResizeObserver = function (callback) {
            return new Original(function () {
              try {
                callback.apply(this, arguments);
              } catch (e) {
                // Silent
              }
            });
          };
        }

        // Override fetch to handle network errors
        if (window.fetch) {
          const originalFetch = window.fetch;
          window.fetch = function (...args) {
            const url = args[0];
            const urlString =
              typeof url === "string" ? url : url?.toString() || "";

            // Let third-party services fail silently
            if (
              urlString.includes("fullstory.com") ||
              urlString.includes("edge.fullstory.com") ||
              urlString.includes("fs.js") ||
              urlString.includes("chrome-extension") ||
              urlString.includes("moz-extension") ||
              urlString.includes("safari-extension")
            ) {
              return originalFetch.apply(this, args).catch(function () {
                return new Response("", {
                  status: 204,
                  statusText: "Service unavailable",
                });
              });
            }

                        // Handle Vite dev client issues gracefully
            if (
              urlString.includes("@vite/client") ||
              urlString.includes(".fly.dev") ||
              urlString.includes("ping")
            ) {
              return originalFetch.apply(this, args).catch(function (error) {
                // Always suppress Vite client errors silently
                return new Response("{}", {
                  status: 200,
                  statusText: "OK",
                  headers: { "Content-Type": "application/json" },
                  });
                }
                throw error;
              });
            }

            return originalFetch.apply(this, args);
          };
        }

                // Additional safety net for messageHandler errors
        const originalEval = window.eval;
        window.eval = function(code) {
          try {
            return originalEval.call(this, code);
          } catch (error) {
            if (
              error.message?.includes("Failed to fetch") ||
              error.message?.includes("ping") ||
              error.message?.includes("@vite/client")
            ) {
              // Silently ignore fetch errors from eval'd code
              return {};
            }
            throw error;
          }
        };

        console.debug("üõ°Ô∏è Immediate error suppression active");
      })();
    </script>
  </head>

  <body>
    <div id="root"></div>

    <!-- Paystack Integration for Checkout -->
    <script src="https://js.paystack.co/v1/inline.js"></script>

    <!-- IMPORTANT: DO NOT REMOVE THIS SCRIPT TAG OR THIS VERY COMMENT! -->
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
